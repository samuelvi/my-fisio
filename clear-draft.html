<!DOCTYPE html>
<html>
<head>
    <title>Clear Draft - Debug</title>
</head>
<body>
    <h1>Draft System Debug</h1>
    <div id="output"></div>

    <script>
        const output = document.getElementById('output');

        // Check current draft
        const draft = localStorage.getItem('draft_invoice');
        output.innerHTML += '<h2>Current Draft:</h2>';
        if (draft) {
            const parsed = JSON.parse(draft);
            output.innerHTML += `<pre>${JSON.stringify(parsed, null, 2)}</pre>`;
            output.innerHTML += `<p><strong>savedByError:</strong> ${parsed.savedByError}</p>`;
        } else {
            output.innerHTML += '<p>No draft found</p>';
        }

        // Clear button
        output.innerHTML += '<br><button onclick="clearDraft()">Clear Draft</button>';
        output.innerHTML += '<button onclick="location.reload()">Reload</button>';

        function clearDraft() {
            localStorage.removeItem('draft_invoice');
            alert('Draft cleared!');
            location.reload();
        }
    </script>
</body>
</html>
